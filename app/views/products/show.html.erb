<div class="container-fluid m-0">
<div class="text-center">
<h1>
<%=@product.name%></h1>

<div class="container" style ="width:80vh">
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">

    <%# loop over images %>
    <% if @product.images.present?%>
      <div class="carousel-item active">
        <%= image_tag(@product.images.first, alt: "avatar", class: "d-block w-100", id: "avatar",:height =>"400", :width => "400") %>
      </div>

      <%@product.images.each do |image|%>
      <div class="carousel-item">
        <%= image_tag(image, alt: "avatar", class: "d-block w-100", id: "avatar",:height =>"400", :width => "400") %>
      </div>
      <%end%>
    <%else%>
    <h1>No images</h1>
     <img src="/assets/Unknown.jpeg" alt=""  width="400" height="400">
    <%end%>


    <%# <div class="carousel-item">
      <img class="d-block w-100" src="..." alt="Second slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="..." alt="Third slide">
    </div> %>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
</div>



<p><%= @product.id %></p>

<%= button_to 'Add To Cart' , line_items_path(product_id: @product), class: 'button is-warning add-to-cart'%>
</div>
</div>

<%# View Comments %>
<div class="m-5">
</div>
<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Comment</th>
      <th scope="col">Edit/Delete</th>
    </tr>
  </thead>
  <tbody>
  <%@product.comments.each do |comment|%>
    <tr>
      <th scope="row">1</th>
      <td><%=comment.commenter%> </td>
      <td><%=comment.body%> </td>
      <td>
        <li><%= link_to "Edit", edit_product_comment_path(comment) %></li>
    <li><%= link_to "Destroy", comment_path(comment) , method: :delete, data: {confirm: "Are You Sure"}%></li>
      </td>
    </tr>
  <%end%>
  <tr>
    <th scope="row">1</th>
      <td><%=2%> </td>
      <td><%=3%> </td>
  </tr>
  </tbody>
</table>

<%# Add Product %>


<%if user_signed_in?%>
  <div class="text-center">
  <%if current_user.id==@product.user_id%>
    You cannot comment on your own product
  <%else%>
    <h2>Add a Comment:</h2>
<%= form_with model: [ @product, @product.comments.build ], remote: true do |form| %>
  <p>
    <%= form.label :body %><br>
    <%=form.text_field :body %>
  </p>
  <p>
    <%= form.submit %>
  </p>
  <%end%>
<% end %>

</div>
<%else%>
  <h3>
    login to comment on products
  </h3>
<%end%>


